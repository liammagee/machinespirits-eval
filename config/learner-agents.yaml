# Learner Agent Architecture Configuration
# Defines how the simulated learner generates responses during evaluation
#
# ============================================================================
# MODEL OVERRIDES (optional)
# ============================================================================
# These override ALL profile models when uncommented. Useful for quick testing.
# CLI flags (--model, --ego-model, --superego-model) take precedence over these.
#
# model_override: openrouter.haiku        # Override ALL models (ego + superego + synthesis)
# ego_model_override: openrouter.nemotron # Override only ego model
# superego_model_override: openrouter.kimi-k2.5  # Override only superego model
#
# ============================================================================
# LEARNER PROFILES
# ============================================================================
#
# The learner profile determines whether the simulated learner has
# internal deliberation before generating responses. This enables testing
# whether multi-agent learner simulation improves evaluation validity.
#
# Profiles:
# 1. unified: Single learner agent (no internal dialogue)
# 2. ego_superego: Two-agent ego/superego deliberation (mirrors tutor architecture)
# 3. psychodynamic: Legacy alias → resolves to ego_superego
#
# ============================================================================

# Active profile (can be overridden by tutor profile's learner_architecture)
active_architecture: unified

# ============================================================================
# PROFILES
# ============================================================================

profiles:
  # Single-agent: no internal deliberation
  unified:
    description: "Single unified learner agent"
    architecture: unified
    unified_learner:
      provider: openrouter
      model: kimi-k2.5
      prompt_file: learner-unified.md
      hyperparameters:
        temperature: 0.7
        max_tokens: 500
    dialogue:
      enabled: false
      max_rounds: 0

  # Two-agent: mirrors tutor ego/superego pattern
  ego_superego:
    description: "Ego/superego learner — mirrors tutor architecture"
    architecture: ego_superego
    ego:
      provider: openrouter
      model: nemotron
      prompt_file: learner-ego.md
      hyperparameters:
        temperature: 0.7
        max_tokens: 400
    superego:
      provider: openrouter
      model: kimi-k2.5
      prompt_file: learner-superego.md
      hyperparameters:
        temperature: 0.5
        max_tokens: 400
    synthesis:
      provider: openrouter
      model: kimi-k2.5
      prompt_file: learner-synthesis.md
      hyperparameters:
        temperature: 0.6
        max_tokens: 500
    dialogue:
      enabled: true
      max_rounds: 2

  # Recognition-enhanced: single unified learner with recognition prompts
  unified_recognition:
    description: "Single unified learner with recognition-aware prompt"
    architecture: unified
    unified_learner:
      provider: openrouter
      model: kimi-k2.5
      prompt_file: learner-unified.md
      hyperparameters:
        temperature: 0.7
        max_tokens: 600
    dialogue:
      enabled: false
      max_rounds: 0

  # Recognition-enhanced: ego/superego with recognition-specific prompts
  ego_superego_recognition:
    description: "Ego/superego learner with recognition-aware prompts and memory"
    architecture: ego_superego
    ego:
      provider: openrouter
      model: nemotron
      prompt_file: learner-ego-recognition.md
      hyperparameters:
        temperature: 0.7
        max_tokens: 600
    superego:
      provider: openrouter
      model: kimi-k2.5
      prompt_file: learner-superego-recognition.md
      hyperparameters:
        temperature: 0.5
        max_tokens: 600
    synthesis:
      provider: openrouter
      model: kimi-k2.5
      prompt_file: learner-synthesis-recognition.md
      hyperparameters:
        temperature: 0.6
        max_tokens: 700
    dialogue:
      enabled: true
      max_rounds: 2

  # Legacy alias so existing 'psychodynamic' references resolve to ego_superego
  psychodynamic:
    description: "Legacy alias — uses ego/superego architecture"
    architecture: ego_superego
    ego:
      provider: openrouter
      model: nemotron
      prompt_file: learner-ego.md
      hyperparameters:
        temperature: 0.7
        max_tokens: 400
    superego:
      provider: openrouter
      model: kimi-k2.5
      prompt_file: learner-superego.md
      hyperparameters:
        temperature: 0.5
        max_tokens: 400
    synthesis:
      provider: openrouter
      model: kimi-k2.5
      prompt_file: learner-synthesis.md
      hyperparameters:
        temperature: 0.6
        max_tokens: 500
    dialogue:
      enabled: true
      max_rounds: 2

# ============================================================================
# PERSONA MODIFIERS
# ============================================================================
# These modifiers adjust learner behavior based on persona

persona_modifiers:
  confused_novice: {}
  eager_explorer: {}
  focused_achiever: {}
  struggling_anxious: {}
  adversarial_tester: {}

# ============================================================================
# EVALUATION SETTINGS
# ============================================================================

evaluation:
  # Track internal deliberation traces for analysis
  log_deliberation: true
  log_path: logs/learner-deliberation

  # Metrics specific to multi-agent learner
  metrics:
    - deliberation_rounds
    - internal_coherence
    - response_authenticity
