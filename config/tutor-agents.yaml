# Local Tutor Agent Configuration (Eval Repo Override)
#
# This file overrides tutor-core's tutor-agents.yaml for evaluation purposes.
# Model aliases (e.g. "sonnet", "nemotron") are resolved through providers.yaml.
#
# ============================================================================
# 3×2×2 FACTORIAL EVALUATION DESIGN
# ============================================================================
#
# Three independent variables:
#
#   Factor A: Prompt Type          — base / enhanced / recognition (3 levels)
#   Factor B: Tutor Architecture   — single ego vs ego+superego dialogue (2 levels)
#   Factor C: Learner Architecture — unified vs ego_superego (2 levels)
#
# Factor A levels:
#   - base:        Original Claude-generated prompts (default LLM tutoring)
#   - enhanced:    Matches recognition specificity without recognition theory
#   - recognition: Full recognition-enhanced prompts with Hegelian theory
#
# This design enables isolating:
#   - Base vs Enhanced      = prompt engineering effect
#   - Enhanced vs Recognition = isolated recognition theory effect
#   - Base vs Recognition   = combined effect (original comparison)
#
# All cells use nemotron (free tier) to isolate architectural effects from model cost.
#
# Design Matrix (12 cells):
#
#   ┌────────────────────┬──────────────────────────┬──────────────────────────┐
#   │                    │   Unified Learner         │   Ego/Superego Learner   │
#   ├────────────────────┼──────────────┬───────────┼──────────────┬───────────┤
#   │                    │ Single Tutor │ E+S Tutor │ Single Tutor │ E+S Tutor │
#   ├────────────────────┼──────────────┼───────────┼──────────────┼───────────┤
#   │ Base               │ cell_1       │ cell_3    │ cell_2       │ cell_4    │
#   ├────────────────────┼──────────────┼───────────┼──────────────┼───────────┤
#   │ Enhanced           │ cell_9       │ cell_11   │ cell_10      │ cell_12   │
#   ├────────────────────┼──────────────┼───────────┼──────────────┼───────────┤
#   │ Recognition        │ cell_5       │ cell_7    │ cell_6       │ cell_8    │
#   └────────────────────┴──────────────┴───────────┴──────────────┴───────────┘
#
# This allows analyzing:
#   - Main effect of prompt type (base vs enhanced vs recognition)
#   - Main effect of tutor architecture (single agent vs ego + superego dialogue)
#   - Main effect of learner architecture (unified vs ego_superego)
#   - All two-way and three-way interactions
#
# ============================================================================

active_profile: budget

profiles:
  # ===========================================================================
  # DEVELOPMENT PROFILE (not part of factorial design)
  # ===========================================================================

  budget:
    description: "Budget-friendly single agent - Nemotron (free) via OpenRouter, no dialogue"
    dialogue:
      enabled: false
      max_rounds: 0
    ego:
      provider: openrouter
      model: nemotron
      prompt_file: tutor-ego.md
      hyperparameters:
        temperature: 0.6
        max_tokens: 8000
    superego: null

  # ===========================================================================
  # 2×2×2 FACTORIAL CELLS (Recognition × Tutor Architecture × Learner Architecture)
  # ===========================================================================
  # These 8 profiles support the unified factorial evaluation pipeline.
  # Use: node scripts/eval-cli.js run --factorial --runs 3
  # All use nemotron (free tier) to isolate architectural effects from model cost.

  # Cell 1: Base × Single Agent × Unified Learner
  cell_1_base_single_unified:
    description: "Factorial cell 1: baseline single-agent tutor, unified learner"
    factors:
      prompt_type: base
      multi_agent_tutor: false
      multi_agent_learner: false
    learner_architecture: unified
    recognition_mode: false
    memory_enabled: false
    dialogue:
      enabled: false
      max_rounds: 0
    ego:
      provider: openrouter
      model: nemotron
      prompt_file: tutor-ego.md
      hyperparameters:
        temperature: 0.6
        max_tokens: 8000
    superego: null

  # Cell 2: Base × Single Agent × Ego/Superego Learner
  cell_2_base_single_psycho:
    description: "Factorial cell 2: baseline single-agent tutor, ego/superego learner"
    factors:
      prompt_type: base
      multi_agent_tutor: false
      multi_agent_learner: true
    learner_architecture: ego_superego
    recognition_mode: false
    memory_enabled: false
    dialogue:
      enabled: false
      max_rounds: 0
    ego:
      provider: openrouter
      model: nemotron
      prompt_file: tutor-ego.md
      hyperparameters:
        temperature: 0.6
        max_tokens: 8000
    superego: null

  # Cell 3: Base × Multi-Agent Tutor × Unified Learner
  cell_3_base_multi_unified:
    description: "Factorial cell 3: ego+superego tutor, unified learner"
    factors:
      prompt_type: base
      multi_agent_tutor: true
      multi_agent_learner: false
    learner_architecture: unified
    recognition_mode: false
    memory_enabled: false
    dialogue:
      enabled: true
      max_rounds: 2
      convergence_threshold: 0.8
    ego:
      provider: openrouter
      model: nemotron
      staging: front
      prompt_file: tutor-ego.md
      hyperparameters:
        temperature: 0.6
        max_tokens: 8000
    superego:
      provider: openrouter
      model: kimi-k2.5
      staging: back
      prompt_file: tutor-superego.md
      hyperparameters:
        temperature: 0.2
        max_tokens: 8000

  # Cell 4: Base × Multi-Agent Tutor × Ego/Superego Learner
  cell_4_base_multi_psycho:
    description: "Factorial cell 4: ego+superego tutor, ego/superego learner"
    factors:
      prompt_type: base
      multi_agent_tutor: true
      multi_agent_learner: true
    learner_architecture: ego_superego
    recognition_mode: false
    memory_enabled: false
    dialogue:
      enabled: true
      max_rounds: 2
      convergence_threshold: 0.8
    ego:
      provider: openrouter
      model: nemotron
      staging: front
      prompt_file: tutor-ego.md
      hyperparameters:
        temperature: 0.6
        max_tokens: 8000
    superego:
      provider: openrouter
      model: kimi-k2.5
      staging: back
      prompt_file: tutor-superego.md
      hyperparameters:
        temperature: 0.2
        max_tokens: 8000

  # Cell 5: Recognition × Single Agent × Unified Learner
  cell_5_recog_single_unified:
    description: "Factorial cell 5: recognition single-agent tutor, unified learner"
    factors:
      prompt_type: recognition
      multi_agent_tutor: false
      multi_agent_learner: false
    learner_architecture: unified_recognition
    recognition_mode: true
    memory_enabled: true
    dialogue:
      enabled: false
      max_rounds: 0
    ego:
      provider: openrouter
      model: nemotron
      prompt_file: tutor-ego-recognition.md
      hyperparameters:
        temperature: 0.6
        max_tokens: 8000
    superego: null

  # Cell 6: Recognition × Single Agent × Ego/Superego Learner
  cell_6_recog_single_psycho:
    description: "Factorial cell 6: recognition single-agent tutor, ego/superego learner"
    factors:
      prompt_type: recognition
      multi_agent_tutor: false
      multi_agent_learner: true
    learner_architecture: ego_superego_recognition
    recognition_mode: true
    memory_enabled: true
    dialogue:
      enabled: false
      max_rounds: 0
    ego:
      provider: openrouter
      model: nemotron
      prompt_file: tutor-ego-recognition.md
      hyperparameters:
        temperature: 0.6
        max_tokens: 8000
    superego: null

  # Cell 7: Recognition × Multi-Agent Tutor × Unified Learner
  cell_7_recog_multi_unified:
    description: "Factorial cell 7: recognition ego+superego tutor, unified learner"
    factors:
      prompt_type: recognition
      multi_agent_tutor: true
      multi_agent_learner: false
    learner_architecture: unified_recognition
    recognition_mode: true
    memory_enabled: true
    dialogue:
      enabled: true
      max_rounds: 2
      convergence_threshold: 0.7
    ego:
      provider: openrouter
      model: nemotron
      staging: front
      prompt_file: tutor-ego-recognition.md
      hyperparameters:
        temperature: 0.6
        max_tokens: 8000
    superego:
      provider: openrouter
      model: kimi-k2.5
      staging: back
      prompt_file: tutor-superego-recognition.md
      hyperparameters:
        temperature: 0.2
        max_tokens: 8000
    intervention_strategies:
      enforce_mutual_recognition: true
      require_memory_integration: true
      assess_transformative_potential: true

  # Cell 8: Recognition × Multi-Agent Tutor × Ego/Superego Learner
  cell_8_recog_multi_psycho:
    description: "Factorial cell 8: recognition ego+superego tutor, ego/superego learner"
    factors:
      prompt_type: recognition
      multi_agent_tutor: true
      multi_agent_learner: true
    learner_architecture: ego_superego_recognition
    recognition_mode: true
    memory_enabled: true
    dialogue:
      enabled: true
      max_rounds: 2
      convergence_threshold: 0.7
    ego:
      provider: openrouter
      model: nemotron
      staging: front
      prompt_file: tutor-ego-recognition.md
      hyperparameters:
        temperature: 0.6
        max_tokens: 8000
    superego:
      provider: openrouter
      model: kimi-k2.5
      staging: back
      prompt_file: tutor-superego-recognition.md
      hyperparameters:
        temperature: 0.2
        max_tokens: 8000
    intervention_strategies:
      enforce_mutual_recognition: true
      require_memory_integration: true
      assess_transformative_potential: true

  # ===========================================================================
  # ENHANCED CELLS (9-12): Better prompting WITHOUT recognition theory
  # ===========================================================================
  # These cells use tutor-ego-enhanced.md and tutor-superego-enhanced.md which
  # match the recognition prompts' specificity (8 rules, 10 examples, checklists)
  # but WITHOUT Hegelian recognition theory language.
  #
  # Comparing Enhanced vs Recognition isolates the recognition theory effect.
  # Comparing Base vs Enhanced isolates the prompt engineering effect.

  # Cell 9: Enhanced × Single Agent × Unified Learner
  cell_9_enhanced_single_unified:
    description: "Factorial cell 9: enhanced single-agent tutor, unified learner"
    factors:
      prompt_type: enhanced
      multi_agent_tutor: false
      multi_agent_learner: false
    learner_architecture: unified
    recognition_mode: false
    memory_enabled: false
    dialogue:
      enabled: false
      max_rounds: 0
    ego:
      provider: openrouter
      model: nemotron
      prompt_file: tutor-ego-enhanced.md
      hyperparameters:
        temperature: 0.6
        max_tokens: 8000
    superego: null

  # Cell 10: Enhanced × Single Agent × Ego/Superego Learner
  cell_10_enhanced_single_psycho:
    description: "Factorial cell 10: enhanced single-agent tutor, ego/superego learner"
    factors:
      prompt_type: enhanced
      multi_agent_tutor: false
      multi_agent_learner: true
    learner_architecture: ego_superego
    recognition_mode: false
    memory_enabled: false
    dialogue:
      enabled: false
      max_rounds: 0
    ego:
      provider: openrouter
      model: nemotron
      prompt_file: tutor-ego-enhanced.md
      hyperparameters:
        temperature: 0.6
        max_tokens: 8000
    superego: null

  # Cell 11: Enhanced × Multi-Agent Tutor × Unified Learner
  cell_11_enhanced_multi_unified:
    description: "Factorial cell 11: enhanced ego+superego tutor, unified learner"
    factors:
      prompt_type: enhanced
      multi_agent_tutor: true
      multi_agent_learner: false
    learner_architecture: unified
    recognition_mode: false
    memory_enabled: false
    dialogue:
      enabled: true
      max_rounds: 2
      convergence_threshold: 0.8
    ego:
      provider: openrouter
      model: nemotron
      staging: front
      prompt_file: tutor-ego-enhanced.md
      hyperparameters:
        temperature: 0.6
        max_tokens: 8000
    superego:
      provider: openrouter
      model: kimi-k2.5
      staging: back
      prompt_file: tutor-superego-enhanced.md
      hyperparameters:
        temperature: 0.2
        max_tokens: 8000

  # Cell 12: Enhanced × Multi-Agent Tutor × Ego/Superego Learner
  cell_12_enhanced_multi_psycho:
    description: "Factorial cell 12: enhanced ego+superego tutor, ego/superego learner"
    factors:
      prompt_type: enhanced
      multi_agent_tutor: true
      multi_agent_learner: true
    learner_architecture: ego_superego
    recognition_mode: false
    memory_enabled: false
    dialogue:
      enabled: true
      max_rounds: 2
      convergence_threshold: 0.8
    ego:
      provider: openrouter
      model: nemotron
      staging: front
      prompt_file: tutor-ego-enhanced.md
      hyperparameters:
        temperature: 0.6
        max_tokens: 8000
    superego:
      provider: openrouter
      model: kimi-k2.5
      staging: back
      prompt_file: tutor-superego-enhanced.md
      hyperparameters:
        temperature: 0.2
        max_tokens: 8000
